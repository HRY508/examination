<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>用户列表</title>
    <link th:href="@{/js/iCheck/skins/minimal/minimal.css}" rel="stylesheet">
    <link th:href="@{/js/iCheck/skins/minimal/minimal.css}" rel="stylesheet">
    <link th:href="@{/js/iCheck/skins/square/square.css}" rel="stylesheet">
    <link href="/js/iCheck/skins/square/red.css" rel="stylesheet">
    <link href="/js/iCheck/skins/square/blue.css" rel="stylesheet">
    <!--dashboard calendar-->
    <link href="/css/clndr.css" rel="stylesheet">
    <!--common-->
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/style-responsive.css" rel="stylesheet">
</head>

<body class="sticky-header">

<!--左侧开始-->
<div th:replace="~{/admin/commons/common :: commonleft}"></div>
<!--左侧结束-->

<!--主页面开始-->
<div class="main-content" >
    <!--头部开始-->
    <div th:replace="~{/admin/commons/common :: commonheader}"></div>
    <!--头部结束-->

    <!--body wrapper start-->
    <div class="wrapper">
        <div class="row">
            <div class="col-sm-12">
                <section class="panel">
                    <header class="panel-heading">
                        <div>
                            <input class="form-control mr-sm-2 findUsername" type="search" name="userName" placeholder="根据用户名" aria-label="Search">
                            <a class="btn btn-outline-success my-2 my-sm-0 find" type="submit" th:href="@{/admin/searchByList}">查询</a>

                        </div>

                        <a href="javascript:void(0)" onclick="deleteSome()">批量删除</a>
                    </header>

                    <div class="panel-body">
                        <div class="adv-table" style="height: 55em">
                            <div class="space15"></div>
                            <table class="display table table-hover" id="dynamic-table">
                                <form id = "formUser" th:action="@{deleteCount}" method="post">
                                <thead>
                                <tr>
                                    <th>id</th>
                                    <th>用户名</th>
                                    <th>密码</th>
                                    <th>学号</th>
                                    <th>真实姓名</th>
                                    <th>性别</th>
                                    <th>职业</th>
                                    <th>权限</th>
                                    <th>创建时间</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="user : ${page.records}">
                                    <td class="center"><input type="checkbox" name="ids" th:value="${user.id}"></td>
                                    <td th:text="${user.userName}"></td>
                                    <td th:text="${user.password}"></td>
                                    <td th:text="${user.uId}"></td>
                                    <td th:text="${user.realName}"></td>
                                    <td th:text="${user.sex==1} ? '男' : '女'"></td>
                                    <td th:text="${user.profession}"></td>
                                    <td th:text="${user.perms}"></td>
                                    <td th:text="${#dates.format(user.createTime,'yyyy-MM-dd HH:mm:ss')}"></td>
                                    <td>

                                    </td>
                                    <td>
                                        <a th:href="@{/toEdit(id=${user.id})}">edit</a>
                                        <a  th:href="@{/admin/delete/{id}(id=${user.id})}"
                                           onclick="return del()" th:value="${user.id}" value="1">Delete
                                        </a>
                                    </td>
                                </tr>
                                </tbody>
                                </form>
                            </table>
                            <!--分页-->
                            <div th:replace="~{/admin/commons/page :: page}"></div>
                            <!--分页结束-->

                        </div>
                    </div>
                </section>

            </div>
        </div>
    </div>
    <!--body wrapper end-->

    <!--footer section start-->
    <footer>
        2022 &copy;<a href="https://www.pdsu.edu.cn/" target="_blank">平顶山学院软件应用双创实验室提供技术支持</a>
    </footer>
    <!--footer section end-->


</div>
<!--主页面结束-->

<!--批量删除-->
<script type="text/javascript">

    function del() {
        if (confirm("您确定要删除吗？")) {
            return true;
        } else {
            return false;
        }
    }


    function deleteSome(){
        var t = confirm("您确认要删除选中的内容吗？");
        if (t == false) {
            return false;
        } else {
            document.getElementById("formUser").submit();  //firnUser是表单名字
        }
    }
</script>


<!--common scripts for all pages-->
<script src="/js/scripts.js"></script>


<!-- END JAVASCRIPTS -->
<script>
    jQuery(document).ready(function() {
        EditableTable.init();
    });
    document.getElementById("user-list").className="active";
    document.getElementById("menu2").className="menu-list nav-active";
</script>
</body>
</html>